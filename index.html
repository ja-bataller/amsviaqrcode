<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Attendance Monitoring System</title>
      <link rel="shortcut icon" href="assets/img/favicon.ico" type="image/x-icon">
      <link rel="stylesheet" href="assets/css/login.css">
      <link rel="stylesheet" href="assets/css/loginbg.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css">
      <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.9/css/unicons.css">
      <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.css" integrity="sha512-DIW4FkYTOxjCqRt7oS9BFO+nVOwDL4bzukDyDtMO7crjUZhwpyrWBFroq+IqRe6VnJkTpRAS6nhDvf0w+wHmxg==" crossorigin="anonymous" />
   </head>
   <body>
      <div class="fixedContainer">
         <div id='stars'></div>
         <div id='stars2'></div>
         <div id='stars3'></div>
      </div>
      <div id='title'>
         <span>
         ATTENDANCE MONITORING SYSTEM 
         </span>
      </div>
      <div class="section">
         <div class="container">
            <div class="row full-height justify-content-center">
               <div class="col-12 text-center align-self-center py-5">
                  <div class="section pb-5 pt-5 pt-sm-2 text-center">
                     <h6 class="mb-0 pb-3"><span>Scan</span><span>Admin</span></h6>
                     <input class="checkbox" type="checkbox" id="reg-log" name="reg-log"/>
                     <label for="reg-log"></label>
                     <div class="card-3d-wrap mx-auto">
                        <div class="card-3d-wrapper">
                           <div class="card-front">
                              <div class="center-wrap">
                                 <div class="section text-center">
                                    <h4 class="mb-3">Scan QR Code</h4>
                                    <div class="videoContainer">
                                       <video id="qr-video" width="640" height="360"></video>
                                    </div>
                                    <div class="form-group">
                                       <span class="spanStyle" id="cam-qr-result"></span>
                                       <!-- <i class="input-icon uil uil-qrcode-scan"></i> -->
                                       <!-- <b>Last detected at: </b>
                                          <span id="cam-qr-result-timestamp"></span>
                                          <br> -->
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="card-back">
                              <div class="center-wrap">
                                 <div class="section text-center">
                                    <form method="#" id="loginForm">
                                       <h4 class="mb-4 pb-3">Administrator Log In</h4>
                                       <div class="form-group">
                                          <input type="text" name="logusername" class="form-style" placeholder="Your Username" id="logusername" autocomplete="off" required>
                                          <i class="input-icon uil uil-user"></i>
                                       </div>
                                       <div class="form-group mt-2">
                                          <input type="password" name="logpass" class="form-style" placeholder="Your Password" id="logpass" autocomplete="off" required>
                                          <i class="input-icon uil uil-lock-alt"></i>
                                       </div>
                                       <input class="btn" type="submit" value="log in">
                                    </form>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <script src="assets/js/script.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js" integrity="sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==" crossorigin="anonymous"></script>
      <script type="module">
         import QrScanner from "../assets/js/qr-scanner.min.js";
         QrScanner.WORKER_PATH = '../assets/js/qr-scanner-worker.min.js';
         
         const video = document.getElementById('qr-video');
         const camHasCamera = document.getElementById('cam-has-camera');
         const camHasFlash = document.getElementById('cam-has-flash');
         const flashToggle = document.getElementById('flash-toggle');
         const flashState = document.getElementById('flash-state');
         const camQrResult = document.getElementById('cam-qr-result');
         const camQrResultTimestamp = document.getElementById('cam-qr-result-timestamp');
         const fileSelector = document.getElementById('file-selector');
         const fileQrResult = document.getElementById('file-qr-result');
         
         function setResult(label, result) {
            
            iziToast.success({
                  title: result,
                  message: new Date().toString(),
                  position: "topCenter",
                  timeout:5000,
            });
            //  label.textContent = result;
            //  camQrResultTimestamp.textContent = new Date().toString();
             label.style.color = 'white';
             clearTimeout(label.highlightTimeout);
             label.highlightTimeout = setTimeout(() => label.style.color = 'inherit', 100);
             qrScanner.stop();
         }
         
         // ####### Web Cam Scanning #######
         QrScanner.hasCamera().then(hasCamera => camHasCamera.textContent = hasCamera);
         
         
         const scanner = new QrScanner(video, result => setResult(camQrResult, result), error => {
            //  camQrResult.textContent = error;
            //  camQrResult.style.color = 'inherit';
         });
         scanner.start().then(() => {
             scanner.hasFlash().then(hasFlash => {
                 camHasFlash.textContent = hasFlash;
                 if (hasFlash) {
                     flashToggle.style.display = 'inline-block';
                     flashToggle.addEventListener('click', () => {
                         scanner.toggleFlash().then(() => flashState.textContent = scanner.isFlashOn() ? 'on' : 'off');
                     });
                 }
             });
         });
      
      
      </script>

   <!-- <script type="text/javascript" >
      function preventBack(){window.history.forward();}
      setTimeout("preventBack()", 0);
      window.onunload=function(){null};
   </script> -->
   </body>
</html>